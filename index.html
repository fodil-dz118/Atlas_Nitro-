<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atlas Nitro - Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø±Ø³Ù…ÙŠ</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root {
            --atlas-blue: #5865F2;
            --nitro-pink: #ff73fa;
            --dark-bg: #1e1f22;
            --card-bg: #2b2d31;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--dark-bg);
            color: white;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .app-container {
            width: 90%;
            max-width: 400px;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            text-align: center;
            border: 1px solid #3f4147;
        }

        h1 { margin: 10px 0; font-size: 26px; }
        .subtitle { color: #b5bac1; font-size: 14px; margin-bottom: 25px; }

        .hidden { display: none; }

        input {
            width: 100%; padding: 12px; margin: 10px 0;
            border-radius: 8px; border: 1px solid #1e1f22;
            background: #40444b; color: white; box-sizing: border-box;
            text-align: center; outline: none;
        }

        button {
            width: 100%; padding: 14px; border-radius: 8px; border: none;
            font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.2s; margin-top: 10px;
        }
        .btn-primary { background: var(--atlas-blue); color: white; }
        .btn-nitro { background: var(--nitro-pink); color: white; }
        button:hover { opacity: 0.9; transform: scale(0.98); }

        .points-box {
            background: linear-gradient(135deg, var(--atlas-blue), var(--nitro-pink));
            padding: 20px; border-radius: 15px; margin: 20px 0;
        }
        .points-value { font-size: 38px; font-weight: 800; display: block; }

        .inventory-info {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px dashed #4f545c;
        }

        #ad-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.98); z-index: 9999;
            flex-direction: column; justify-content: center; align-items: center;
        }
        .discord-img { width: 100px; margin-bottom: 15px; }
        
        #cooldown-timer { color: #ff73fa; font-size: 12px; margin-top: 5px; font-weight: bold; }
        #links-status { color: #00ff00; font-size: 13px; font-weight: bold; }
        #current-link-number { color: var(--nitro-pink); font-size: 18px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="app-container">
        <div id="step-login">
            <img src="Discord.png" alt="Discord Logo" class="discord-img">
            <h1>Atlas Nitro</h1>
            <p class="subtitle">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø¹Ø¨Ø± Ø¬ÙˆØ¬Ù„ Ù„Ù„Ø¨Ø¯Ø¡</p>
            <div id="g_id_onload" data-client_id="1035748084009-cop81ce2crdq16pfeanrtq3odgkcmm4k.apps.googleusercontent.com" data-callback="onSignIn"></div>
            <div style="display: flex; justify-content: center;">
                <div class="g_id_signin" data-type="standard" data-shape="pill" data-theme="filled_blue" data-size="large"></div>
            </div>
        </div>

        <div id="step-data" class="hidden">
            <h2>Ø£ÙƒÙ…Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</h2>
            <input type="text" id="nameInput" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
            <input type="text" id="dobInput" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ DD/MM/YYYY">
            <button class="btn-primary" onclick="finishSetup()">Ø¯Ø®ÙˆÙ„ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚</button>
        </div>

        <div id="step-main" class="hidden">
            <div style="text-align: right; font-size: 13px; color: #b5bac1;">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ <span id="display-name" style="color: white; font-weight: bold;"></span></div>
            <div class="points-box">
                <span class="points-value" id="points-count">0</span>
                <span>Ù†Ù‚Ø·Ø© Atlas</span>
            </div>

            <div class="inventory-info">
                <div id="links-status">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</div>
                <div id="link-id-display" style="margin-top:5px;">Ø§Ù„Ù†ÙŠØªØ±Ùˆ Ø§Ù„Ù…ØªØ§Ø­ Ù„Ù„ØªØ³Ù„ÙŠÙ…: <span id="current-link-number">#1</span></div>
            </div>
            
            <button class="btn-primary" onclick="showAd()">ğŸ“º Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¥Ø¹Ù„Ø§Ù† (+30 Ù†Ù‚Ø·Ø©)</button>
            <button id="buy-btn" class="btn-nitro" onclick="redeem()">ğŸ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù†ÙŠØªØ±Ùˆ (7000 Ù†Ù‚Ø·Ø©)</button>
            <div id="cooldown-timer"></div>
            
            <p style="font-size: 11px; color: #80848e; margin-top: 15px;">ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ø¶Ù…Ø§Ù† Ø­Ù‚ÙŠÙ‚Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª</p>
            <button onclick="logout()" style="background:transparent; color:#ff4747; border:none; margin-top:10px; cursor:pointer;">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
        </div>
    </div>

    <div id="ad-overlay">
        <h2 style="color: var(--nitro-pink);">Ø¥Ø¹Ù„Ø§Ù† Atlas Nitro</h2>
        <p>Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠÙ†ØªÙ‡ÙŠ Ø§Ù„Ø¹Ø¯Ø§Ø¯: <span id="ad-timer" style="font-weight: bold; font-size: 22px;">15</span></p>
    </div>

    <script>
        const INITIAL_TOTAL = 47; 
        let nitroLinks = [
            "https://promos.discord.gg/Ge28zGCH5pMSbEebpBkUa8nc","https://promos.discord.gg/JBbC5pHuz4bMWwkxB8Xpxwgg","https://promos.discord.gg/HXWpfStcKQTJBMkMEpDH5AxM","https://promos.discord.gg/Gfn6ck6U7GSd67nGHezh9DGt","https://promos.discord.gg/GrpJKRftgjuRUV9mFT5z7zdn","https://promos.discord.gg/Gm79wCTa68SZnjHTwxDzKkUE","https://promos.discord.gg/HJg3prRaugw4ArQW7utstczw","https://promos.discord.gg/Gs64zR3n2C6mQQ5VNyxzfY77","https://promos.discord.gg/HfwYhAyTcAY7vpea2vkXYdr7","https://promos.discord.gg/HDXmDNbg692kxrckZxnAmgWY","https://promos.discord.gg/GwCJhRKK8ZyfpjGpeSc3EpED","https://promos.discord.gg/H75DpgWCNHpfQKqTSuUGfpbH","https://promos.discord.gg/H6hwxjgU73WnzPa2TKmTpm8u","https://promos.discord.gg/H32pbCv99TgXmr5jUd72b45P","https://promos.discord.gg/GtEAXWAzaG8P4e5fGHHfAVhv","https://promos.discord.gg/GmYdVwm6sQaExDQW6hj6NKsw","https://promos.discord.gg/GyteUPswcwm5QZfdeFwXxxyH","https://promos.discord.gg/HABMzJXut68f3zhjZvCYSuxu","https://promos.discord.gg/HRbWpwNSC4mw55HFeuTZBJxY","https://promos.discord.gg/HgpdDBwUENKyjR4aaGBVps7h","https://promos.discord.gg/H5DEQbqAa6Xv3pdnjKugJJv2","https://promos.discord.gg/H4CpujzHG4AbFRsyZynSg6PB","https://promos.discord.gg/HA3PdKX8uhbDxkSZwhNJsbtX","https://promos.discord.gg2/HWA8NTps9BjmCCZXVejdraSy","https://promos.discord.gg/H9VHhVt9xJAusXRh2hBpQfY6","https://promos.discord.gg/H3bJZMuWyEb2Mf8HC9UR7jJ6","https://promos.discord.gg/GdWwMPGdremBJASdRfPjuebD","https://promos.discord.gg/GxKPCzzCMHWdfpuDcZ37cWty","https://discord.com/billing/promotions/JF9bFf5ZbaYS2zRbB9F87wkk","https://promos.discord.gg/JNSkgddNbAFsVj57qXjNgNX6","https://promos.discord.gg/HrKGzSFPcvfncPcMMWTEjj6x","https://promos.discord.gg/JBYCQ5agBsNAV3sHA6E5VwQK","https://promos.discord.gg/Jg5W7zWYscWthm6NBnm8rZaf","https://promos.discord.gg/JdyGgTYkdsmWJaZbXYWsQUkz","https://promos.discord.gg/JJbNW4y58GsxVRbmXKZw5Xvm","https://promos.discord.gg/JTx8PSKgR36HpjVRqyBMyE7C","https://promos.discord.gg/JNvA76qKVPVcjJES9ujSpNYa","https://promos.discord.gg/JJtVaGjUFxcaUBw8WrKykRVX","https://promos.discord.gg/CSQNY4eykYSWZ4gMyJAn7C47","https://promos.discord.gg/9JFMF4zmPFR4U2ktMJQ4GQEd","https://promos.discord.gg/9WTKJ2CXmaAMvBbXHBmzYVhc",
            "https://promos.discord.gg/WtF32n3X9BUffH67Ykrzqsxd","https://promos.discord.gg/WUqEevBs5YQjTATXCHf7ZKP5","https://promos.discord.gg/WV5yGaHQvh5hRAt8juadTFYS","https://promos.discord.gg/WmxNNz53qkesSZbndkpEGxxp","https://promos.discord.gg/WrG9UKXykxdxRjxqmgERqh8Z","https://promos.discord.gg/WtF32n3X9BUffH67Ykrzqsxd"
        ];

        let currentUserId = localStorage.getItem('last_user_id');

        window.onload = function() {
            let storedLinks = localStorage.getItem('nitro_inventory');
            if (storedLinks) {
                nitroLinks = JSON.parse(storedLinks);
            } else {
                localStorage.setItem('nitro_inventory', JSON.stringify(nitroLinks));
            }
            if (currentUserId) {
                let savedData = localStorage.getItem('atlas_user_' + currentUserId);
                if (savedData) {
                    let user = JSON.parse(savedData);
                    goToMain(user.name, user.points);
                }
            }
        };

        function onSignIn(response) {
            const userData = JSON.parse(atob(response.credential.split('.')[1]));
            currentUserId = userData.sub;
            localStorage.setItem('last_user_id', currentUserId);
            let savedData = localStorage.getItem('atlas_user_' + currentUserId);
            if (savedData) {
                let user = JSON.parse(savedData);
                goToMain(user.name, user.points);
            } else {
                document.getElementById('step-login').classList.add('hidden');
                document.getElementById('step-data').classList.remove('hidden');
                document.getElementById('nameInput').value = userData.name;
            }
        }

        function finishSetup() {
            const name = document.getElementById('nameInput').value;
            if (!name) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ");
            let userData = { name: name, points: 0, lastPurchase: 0 };
            localStorage.setItem('atlas_user_' + currentUserId, JSON.stringify(userData));
            goToMain(name, 0);
        }

        function goToMain(name, points) {
            document.getElementById('display-name').innerText = name;
            document.getElementById('points-count').innerText = points;
            document.getElementById('step-login').classList.add('hidden');
            document.getElementById('step-data').classList.add('hidden');
            document.getElementById('step-main').classList.remove('hidden');
            updateStatusUI();
            checkCooldownStatus();
        }

        function updateStatusUI() {
            const statusBox = document.getElementById('links-status');
            const numBox = document.getElementById('current-link-number');
            const idDisplay = document.getElementById('link-id-display');

            if (nitroLinks.length > 0) {
                statusBox.innerText = `Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${nitroLinks.length}`;
                statusBox.style.color = "#00ff00";
                
                let currentNum = INITIAL_TOTAL - nitroLinks.length + 1;
                numBox.innerText = `#${currentNum}`;
                idDisplay.style.display = 'block';
            } else {
                statusBox.innerText = "Ù†ÙØ°Øª Ø§Ù„ÙƒÙ…ÙŠØ©! Ø§Ù†ØªØ¸Ø± Ø§Ù„ØªØ¬Ø¯ÙŠØ¯.";
                statusBox.style.color = "#ff4747";
                idDisplay.style.display = 'none';
            }
        }

        function checkCooldownStatus() {
            let user = JSON.parse(localStorage.getItem('atlas_user_' + currentUserId));
            const buyBtn = document.getElementById('buy-btn');
            const timerBox = document.getElementById('cooldown-timer');
            if (user.lastPurchase) {
                const oneWeek = 7 * 24 * 60 * 60 * 1000;
                const timeLeft = (user.lastPurchase + oneWeek) - Date.now();
                if (timeLeft > 0) {
                    buyBtn.disabled = true;
                    buyBtn.style.opacity = "0.5";
                    let days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                    let hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    timerBox.innerText = `Ù…ØªØ§Ø­ Ù„Ù„Ø´Ø±Ø§Ø¡ Ø¨Ø¹Ø¯: ${days}ÙŠ ${hours}Ø³`;
                    return false;
                }
            }
            buyBtn.disabled = false;
            buyBtn.style.opacity = "1";
            timerBox.innerText = "";
            return true;
        }

        function showAd() {
            const adURL = "https://www.effectivegatecpm.com/g7v7zrki4?key=00e15d386272d1aaee15dcd17a8b3961"; 
            window.open(adURL, '_blank');
            document.getElementById('ad-overlay').style.display = 'flex';
            let timeLeft = 15;
            let interval = setInterval(() => {
                timeLeft--;
                document.getElementById('ad-timer').innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(interval);
                    document.getElementById('ad-overlay').style.display = 'none';
                    updatePoints(30);
                }
            }, 1000);
        }

        function updatePoints(amount) {
            let user = JSON.parse(localStorage.getItem('atlas_user_' + currentUserId));
            user.points += amount;
            localStorage.setItem('atlas_user_' + currentUserId, JSON.stringify(user));
            document.getElementById('points-count').innerText = user.points;
            alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© 30 Ù†Ù‚Ø·Ø© Ù„Ø±ØµÙŠØ¯Ùƒ!");
        }

        function redeem() {
            if (!checkCooldownStatus()) return;
            let user = JSON.parse(localStorage.getItem('atlas_user_' + currentUserId));
            if (user.points < 7000) return alert("Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ (Ù…Ø·Ù„ÙˆØ¨ 7000 Ù†Ù‚Ø·Ø©)");
            if (nitroLinks.length === 0) return alert("Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙØ§Ø±Øº Ø­Ø§Ù„ÙŠØ§Ù‹.");

            let link = nitroLinks.shift(); 
            localStorage.setItem('nitro_inventory', JSON.stringify(nitroLinks));

            user.points -= 7000;
            user.lastPurchase = Date.now();
            localStorage.setItem('atlas_user_' + currentUserId, JSON.stringify(user));

            document.getElementById('points-count').innerText = user.points;
            updateStatusUI(); 
            checkCooldownStatus();

            alert("Ù…Ø¨Ø±ÙˆÙƒ! Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ Ù‡Ùˆ: " + link);
            window.open(link, '_blank');
        }

        function logout() {
            localStorage.removeItem('last_user_id');
            location.reload();
        }
    </script>
</body>
</html>
